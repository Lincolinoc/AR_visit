<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>AR –í–∏–∑–∏—Ç–∫–∞ —Å –º–∞—Ä–∫–µ—Ä–æ–º</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ar.js@3.4.5/aframe/build/aframe-ar.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            width: 100%;
            height: 100vh;
            font-family: Arial, sans-serif;
            background: #000;
            overflow: hidden;
        }
        
        a-scene {
            width: 100%;
            height: 100%;
        }
        
        #debug-info {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.9);
            color: #0f0;
            padding: 15px;
            border-radius: 5px;
            font-size: 12px;
            font-family: monospace;
            z-index: 1000;
            max-width: 300px;
            line-height: 1.6;
            border: 2px solid #0f0;
        }
        
        #controls {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            z-index: 1000;
        }
        
        button {
            padding: 10px 15px;
            background: #0f0;
            color: #000;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 12px;
            transition: all 0.2s;
        }
        
        button:hover {
            background: #0c0;
            transform: scale(1.05);
        }
        
        button:active {
            transform: scale(0.95);
        }
        
        #marker-status {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 50, 0, 0.95);
            color: #0f0;
            padding: 12px 15px;
            border-radius: 5px;
            font-size: 13px;
            font-family: monospace;
            z-index: 1000;
            border: 2px solid #0f0;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <a-scene 
        embedded 
        arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono; matrixCodeType: 3x3; cameraParametersUrl: https://cdn.jsdelivr.net/npm/ar.js@3.4.5/three.js/examples/jsm/libs/OpenCV/camera_para.dat;">
        
        <a-assets>
            <!-- –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ -->
        </a-assets>
        
        <!-- –ú–∞—Ä–∫–µ—Ä Hiro -->
        <a-marker preset="hiro" id="main-marker">
            
            <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫—É–± -->
            <a-box 
                id="cube"
                position="0 0 0" 
                scale="0.8 0.8 0.8"
                color="#00d4ff"
                animation="property: rotation; to: 0 360 0; loop: true; dur: 4000;">
            </a-box>
            
            <!-- –ü–∏—Ä–∞–º–∏–¥–∞ (—Å–∫—Ä—ã—Ç–∞) -->
            <a-tetrahedron 
                id="pyramid"
                position="0 0 0" 
                scale="1 1 1"
                color="#ff00ff"
                visible="false"
                animation="property: rotation; to: 360 0 0; loop: true; dur: 3000;">
            </a-tetrahedron>
            
            <!-- –¢–æ—Ä (—Å–∫—Ä—ã—Ç–∞) -->
            <a-torus 
                id="torus"
                position="0 0 0" 
                scale="0.7 0.7 0.7"
                color="#00ff00"
                visible="false"
                radius="1"
                radius-tubular="0.3"
                animation="property: rotation; to: 0 360 0; loop: true; dur: 2500;">
            </a-torus>
            
            <!-- –¢–µ–∫—Å—Ç–æ–≤–∞—è –º–µ—Ç–∫–∞ -->
            <a-text 
                value="AR CARD"
                position="0 1.2 0"
                align="center"
                scale="1.5 1.5 1.5"
                color="#00ffff"
                animation="property: position; from: 0 1.2 0; to: 0 1.5 0; loop: true; dur: 2000; direction: alternate;">
            </a-text>
            
            <!-- –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å—Ñ–µ—Ä—ã -->
            <a-sphere 
                position="1.2 0 0" 
                scale="0.3 0.3 0.3"
                color="#ff6600">
            </a-sphere>
            
            <a-sphere 
                position="-0.6 1 0.7" 
                scale="0.3 0.3 0.3"
                color="#00ff99">
            </a-sphere>
            
            <a-sphere 
                position="-0.6 -1 0.7" 
                scale="0.3 0.3 0.3"
                color="#ff0099">
            </a-sphere>
            
        </a-marker>
        
        <!-- –ö–∞–º–µ—Ä–∞ -->
        <a-camera position="0 0 0"></a-camera>
        
    </a-scene>
    
    <div id="debug-info">
        <div>üì° AR Status:</div>
        <div id="status-text">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...</div>
        <div style="margin-top: 10px; color: #0a0; font-size: 11px;">
            ‚úì –ù–∞–≤–µ–¥–∏ –∫–∞–º–µ—Ä—É –Ω–∞ –º–∞—Ä–∫–µ—Ä Hiro
        </div>
    </div>
    
    <div id="marker-status">
        ‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –º–∞—Ä–∫–µ—Ä–∞...
    </div>
    
    <div id="controls">
        <button onclick="switchModel('cube')">üü¶ –ö—É–±</button>
        <button onclick="switchModel('pyramid')">üî∫ –ü–∏—Ä–∞–º–∏–¥–∞</button>
        <button onclick="switchModel('torus')">üîµ –¢–æ—Ä</button>
        <button onclick="toggleAnimation()">‚è∏ –ê–Ω–∏–º–∞—Ü–∏—è</button>
    </div>

    <script>
        let scene = document.querySelector('a-scene');
        let marker = document.querySelector('a-marker');
        let statusText = document.getElementById('status-text');
        let markerStatus = document.getElementById('marker-status');
        
        let currentModel = 'cube';
        let animationEnabled = true;
        
        // –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ü–µ–Ω—ã
        if (scene.hasLoaded) {
            onSceneLoaded();
        } else {
            scene.addEventListener('loaded', onSceneLoaded);
        }
        
        function onSceneLoaded() {
            console.log('A-Frame —Å—Ü–µ–Ω–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            updateStatus('‚úì A-Frame –≥–æ—Ç–æ–≤');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ –∫–∞–º–µ—Ä—É
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(() => {
                    updateStatus('‚úì –ö–∞–º–µ—Ä–∞ –≤–∫–ª—é—á–µ–Ω–∞');
                })
                .catch((err) => {
                    updateStatus('‚úó –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ!');
                    console.error('Camera error:', err);
                });
        }
        
        // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–∞—Ä–∫–µ—Ä–∞
        marker.addEventListener('markerFound', () => {
            console.log('–ú–∞—Ä–∫–µ—Ä –Ω–∞–π–¥–µ–Ω!');
            markerStatus.textContent = '‚úì –ú–∞—Ä–∫–µ—Ä –Ω–∞–π–¥–µ–Ω!';
            markerStatus.style.color = '#0f0';
            markerStatus.style.borderColor = '#0f0';
            updateStatus('‚úì –ú–∞—Ä–∫–µ—Ä –∞–∫—Ç–∏–≤–µ–Ω!');
        });
        
        marker.addEventListener('markerLost', () => {
            console.log('–ú–∞—Ä–∫–µ—Ä –ø–æ—Ç–µ—Ä—è–Ω');
            markerStatus.textContent = '‚úó –ú–∞—Ä–∫–µ—Ä –ø–æ—Ç–µ—Ä—è–Ω';
            markerStatus.style.color = '#f00';
            markerStatus.style.borderColor = '#f00';
            updateStatus('‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –º–∞—Ä–∫–µ—Ä–∞...');
        });
        
        function switchModel(modelName) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –º–æ–¥–µ–ª–∏
            document.getElementById('cube').setAttribute('visible', 'false');
            document.getElementById('pyramid').setAttribute('visible', 'false');
            document.getElementById('torus').setAttribute('visible', 'false');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é
            document.getElementById(modelName).setAttribute('visible', 'true');
            currentModel = modelName;
            
            updateStatus(`‚úì –ú–æ–¥–µ–ª—å: ${modelName.toUpperCase()}`);
        }
        
        function toggleAnimation() {
            animationEnabled = !animationEnabled;
            
            const models = ['cube', 'pyramid', 'torus'];
            models.forEach(modelId => {
                const el = document.getElementById(modelId);
                if (animationEnabled) {
                    el.setAttribute('animation', 'enabled', 'true');
                } else {
                    el.removeAttribute('animation');
                }
            });
            
            updateStatus(animationEnabled ? '‚úì –ê–Ω–∏–º–∞—Ü–∏—è: –í–ö–õ' : '‚úó –ê–Ω–∏–º–∞—Ü–∏—è: –í–´–ö–õ');
        }
        
        function updateStatus(text) {
            statusText.textContent = text;
            console.log(text);
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        updateStatus('‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ AR.js...');
        
        // –ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∏–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(() => {
            if (scene && scene.hasLoaded) {
                updateStatus('‚úì –ì–æ—Ç–æ–≤–æ! –ù–∞–≤–æ–¥–∏ –Ω–∞ –º–∞—Ä–∫–µ—Ä');
            }
        }, 3000);
    </script>
</body>
</html>


